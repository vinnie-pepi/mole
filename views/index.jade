extends layout

block content
  div.index
    div.col-6.profile-list
      h2 Profiles
      ul.list-group
        - each p in profiles
          li.list-group-item
            a(href="/profile/"+ p._id)
              h4.list-group-item-heading= p.id
              p.list-group-item-text= p.traits

    div.col-6.right-column.create-profile
      h2 Create a Profile
      form(method="POST", action="/")
        div.input-group
          span.input-group-btn
            button.btn.btn-default.uuid-gen generate uuid
          input.user-name.form-control(name="id", placeholder='Name or ID')
        div.input-group
          textarea.user-traits.form-control(name="traits", placeholder='User Traits (add description of user profile)')
        button.btn-success.btn Create
  script(type="text/javascript").
    function s4() {
      return Math.floor((1 + Math.random()) * 0x10000)
        .toString(16)
        .substring(1);
    }

    function guid() {
      return s4() + s4() + '-' + s4() + '-' + s4() + '-' +
        s4() + '-' + s4() + s4() + s4();
    }

    var $uuidGen = $('.uuid-gen');
    var $idField = $('.user-name');
    $uuidGen.click(function(e) {
      e.preventDefault();
      $idField.val(guid());
    });
