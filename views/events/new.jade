extends ../layout
block content
  .container.page-events
    h1 Generating Events for
    .row
      .col-md-6.poi-section
        ul.nav.nav-pills
          li
            a(href="#poiSearchTab", data-toggle="pill") POI Search
          li
            a(href="#manualEntryTab", data-toggle="pill") Manual Entry

        .tab-content.dashboard-batch-status
          .tab-pane#poiSearchTab
            form#poiQuery
              .form-group
                .input-group#searchType
                  input.form-control(value="coffee", type="text", name="categories")
                  .input-group-btn
                    button.btn.btn-default.dropdown-toggle(data-toggle="dropdown") 
                      | Search
                      span.caret
                    ul.dropdown-menu.pull-right
                      li
                        a(href="#option") Search

              .form-group
                label Event Origin (default home)
                input.form-control(type="text", name="locus", value=profileData.homeRef.join(', '))
                    
              .form-group
                label Event Radius 
                input.form-control(type="text", name="distance", value="5000")
              .form-group
                button.btn.btn-success#performSearch Search POI

            ul#poi-list.list-group

          .tab-pane#manualEntryTab
            form#manualEntry
              .form-group
                label New Event Locus (default home)
                .input-group
                  input.form-control(type="text", name="locus", value=profileData.homeRef.join(', '))
                  span.input-group-addon.glyphicon.glyphicon-globe 

      .col-md-6#timeSelector
        h4 Time Frames
        form
          .form-inline(style="margin-bottom:12px")
            .form-group
              label Start Date
              input.form-control.datetime-start(type="text", name="dateStart")
            .form-group
              label End Date
              input.form-control.datetime-end(type="text", name="dateEnd")
          
          .form-group
            label Timezone Offset
            select.form-control(name="tzOffset")
              option(value="-5") EST
              option(value="-6") CST
              option(value="-7") MST
              option(value="-8") PST
          .form-group
            label Constrain to:
            select.rangeSelector.form-control(name="weekRange")
              option(value="weekdays") weekdays
              option(value="weekends") weekends
              each day in [ 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday' ]
                option(value="#{day}")= day
              
          .slider-container

          .form-group.hide
            label Distribution of Events:
            .checkbox-inline
              input(type="radio", value="even", name="distribution") 
              | Even
              input(type="radio", value="random", name="distribution") 
              | Random

          .form-group
            label Number of Events
            input.form-control(type="number", name="numEvents")

          .form-group
            label Offset Degrees
            input.form-control(type="text", name="degreeOffset", placeholder="0.00001")
            span.help-block adds a random amount of offset within limit specified

          .form-group
            button.btn.btn-success.btn-generate Generate Events
      .col-md-6
    #mapBoxModal

block javascripts

  script(src='/javascripts/timestamps.js')
  script(src='/javascripts/events/geo_selector.js')

  script(src='/javascripts/events/manual_entry_view.js')
  script(src='/javascripts/events/poi_list_view.js')
  script(src='/javascripts/events/query_view.js')
  script(src='/javascripts/events/poi_controller.js')
  script(src='/javascripts/events/time_selector.js')
  script(src='/javascripts/events/event_generator.js')
  script(src='/javascripts/events/app.js')

  script(type="text/javascript").
    $(function () {

      var eventApp = new EventApp({
        _id: "#{profileData._id}",
        mapBoxId: "#{config.mapbox.id}"
      });
        
    });
